<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>:></title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <style>
    

    body {
      background: linear-gradient(to right, #212121, #cfdef3);
      padding: 40px; 
     max-width: 800px; 
      margin: auto; 
      color: #333333;
      min-height: 100%; 
      position: relative; 
      /*padding-bottom: 1000px; */
    }

    h1 {
      text-align: center;
      font-size: 48px;
      background: linear-gradient(to right, #e9f2ff, #98a8af);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      color: transparent;
      margin-bottom: 30px;
    }

    footer {
      bottom: 0; 
      left: 0;
      color: #f9f7de;
      margin-top :123px;
      text-align: center;
      width: 100%;
     
    }

    .footer-content p {
      margin: 40px 0;
    }

    

    .social-icon {
      width: 30px;
      height: 30px;
      font-size: 31px;
      transition: transform 0.3s;
      
      
    }
    .link{
      border-radius: 33%;
      margin: 30px ;margin-top: 10px ;
      padding: -5px;
      display: inline-block;
      width: 30px;
      height: 30px;
      transition: transform 0.3s;
      text-align: center;
    }
.link:hover{
  transform: scale(2);
}
    
    label {
      color: #f9f7de;
      font-weight: bold;
      display: block;
      margin-top: 20px;
    }
     input[type="file"]{
      width: 35%;
      padding: 12px;
      margin-top: 10px;
      font-size: 16px;
      border-radius: 10px;
      border: 1px solid #ccc;
      box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.1);
      background-color: #333;
      color: #ffffff;
    }
    textarea {
      width: 100%;
      padding: 12px;
      margin-top: 10px;
      font-size: 16px;
      border-radius: 10px;
      border: 1px solid #ccc;
      box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.1);
      background-color: #333;
      color: #ffffff;
    }
.result {user-select: all;
      background: #4f4f4f;
      color: #cfdef3;
      padding: 12px;
      border-radius: 12px;
      margin-top: 30px;
      white-space: pre-wrap;
      word-break: break-word;
      border: 1px solid #ddd;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.05);
    }
    @keyframes ani1 {
      20% { background-color: #4F46E5; color: #cfdef3; }
      40% { background-color: #F97316; color: #fbfbfb; }
      60% { background-color: #14B8A6; color: #E0F2FE; }
      80% { background-color: #FDE68A; color: #92400E; }
    }

    @keyframes ani2 {
      20% { background-color: #FDE68A; color: #92400E; }
      40% { background-color: #14B8A6; color: #E0F2FE; }
      60% { background-color: #F97316; color: #fbfbfb; }
      80% { background-color: #4F46E5; color: #cfdef3; }
    }

    .b1 {
      padding: 12px 24px;
      font-size: 16px;
      cursor: pointer;
      border: none;
      border-radius: 10px;
      background-color: #334155;
      color: #E2E8F0;
      margin-top: 20px;
      margin-right: 10px;
      transition: background-color 0.3s ease;
      animation: ani1 90s infinite linear;
    }

    .b2 {
      padding: 12px 24px;
      font-size: 16px;
      cursor: pointer;
      border: none;
      border-radius: 10px;
      background-color: #334155;
      color: #E2E8F0;
      margin-top: 20px;
      margin-right: 10px;
      transition: background-color 0.3s ease;
      animation: ani2 90s infinite linear;
    }

    button:hover {
      background-color: #2980b9;
    }

    
  </style>
</head>
<body>
  <h1>Xin chào!</h1><h1>Một ngày tốt lành nhé</h1>
  <label>Tải lên file:</label>
  <input type="file" id="fileInput"><button onclick="document.getElementById('fileInput').value = ''" style="padding: 8px 16px; margin-left: 10px; border-radius: 5px; border: none; background-color: #dc3545; color: white; cursor: pointer;">thoai</button>
    
  <label>Hoặc patê vào đây:</label>
  <textarea id="hexInput" rows="5" placeholder="maybe: AnDepTraiSieuCapVoDichVuTru..."></textarea>
  <button class="b1" onclick="decryptInput()">Triển</button>
  <button class="b2" onclick="downloadResult()">Tải xuống</button>
  <div class = "result" id="output" placeholder="kết quả"></div>

  <footer>
    <div class="footer-content">
      <p>Dùng để giải mã lyrics <b>nhaccuatui</b></p>
      <h3><a href="https://locket.cam/darkthanhan" style="text-decoration: none; color: inherit;""><strong>ByteStorm</strong></a></h3>
      <div class="social-icons">
        <a class = "link" href="https://www.instagram.com/na_hnaht.d/" target="hhhhhiigi" title="Facebook" style=" color: rgb(34, 199, 244);">
          <i class="fab fa-facebook social-icon"></i>
        </a>
        <a class = "link" href="https://www.facebook.com/thanhan2349" target="hoohooooo" title="IG" style="background: linear-gradient(45deg, #F58529, #8a3ab9); color:white;" >
          <i class="fab fa-instagram social-icon" ></i>
        </a>
      </div>
    </div>
  </footer>
  <script>
    const defaultKey = "Lyr1cjust4nct";
    let lastDecoded = "";

    function rc4(key, data) {
      let s = [], j = 0, x, res = [];
      for (let i = 0; i < 256; i++) s[i] = i;
      for (let i = 0; i < 256; i++) {
        j = (j + s[i] + key.charCodeAt(i % key.length)) % 256;
        [s[i], s[j]] = [s[j], s[i]];
      }
      i = j = 0;
      for (let y = 0; y < data.length; y++) {
        i = (i + 1) % 256;
        j = (j + s[i]) % 256;
        [s[i], s[j]] = [s[j], s[i]];
        x = s[(s[i] + s[j]) % 256];
        res.push(data[y] ^ x);
      }
      return res;
    }

    function hexToBytes(hex) {
      const bytes = [];
      for (let c = 0; c < hex.length; c += 2) {
        bytes.push(parseInt(hex.substr(c, 2), 16));
      }
      return bytes;
    }

    function decryptInput() {
      const fileInput = document.getElementById("fileInput");
      const hexInput = document.getElementById("hexInput").value.trim().replace(/\s+/g, '');
      if (fileInput.files.length > 0) {
        const file = fileInput.files[0];
        const reader = new FileReader();
        reader.onload = function(e) {
          const hexStr = e.target.result.replace(/\s+/g, '').trim();
          handleHexDecrypt(hexStr);
        };
        reader.readAsText(file);
      } else if (hexInput.length > 0) {
        handleHexDecrypt(hexInput);
      }
    }

    function handleHexDecrypt(hexStr) {
      if (!hexStr || hexStr.length % 2 !== 0) {
        document.getElementById("output").innerText = "????";
        return;
      }
      const data = hexToBytes(hexStr);
      const resultBytes = rc4(defaultKey, data);
      const decoded = new TextDecoder().decode(new Uint8Array(resultBytes));
      lastDecoded = decoded;
      document.getElementById("output").innerText = decoded;
    }

    function downloadResult() {
      if (!lastDecoded) {
        alert("muốn tải cái gì?");
        return;
      }
      const blob = new Blob([lastDecoded], { type: "text/plain" });
      const url = URL.createObjectURL(blob);
      const a = document.createElement("a");
      a.href = url;
      a.download = "lyrics.txt";
      a.click();
      URL.revokeObjectURL(url);
      }
  </script>
</body>
</html>
